{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="text-center mb-5">
            <h1 class="display-4 mb-3">üçÑ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å –≥—Ä–∏–±–æ–≤</h1>
            <p class="lead text-muted">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤. –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å!</p>
        </div>
        
        <div class="card shadow-lg">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">üìã –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>
            </div>
            <div class="card-body">
                <form method="post" id="mushroom-form">
                    {% csrf_token %}
                    
                    {% for characteristic in characteristics %}
                    <div class="question-section mb-4 p-3 border rounded">
                        <h5 class="mb-3" style="font-size: 1.2rem; font-weight: bold;">
                            <span class="badge bg-primary me-2">{{ forloop.counter }}</span>
                            {{ characteristic.question }}
                        </h5>
                        
                        <div class="row">
                            {% for option in characteristic.characteristicoption_set.all %}
                            <div class="col-lg-4 col-md-6 mb-2">
                                <div class="option-card">
                                    <input class="form-check-input" type="radio" 
                                           name="char_{{ characteristic.id }}" 
                                           value="{{ option.value }}" 
                                           id="char_{{ characteristic.id }}_{{ option.id }}">
                                    <label class="form-check-label w-100 p-2 border rounded" 
                                           for="char_{{ characteristic.id }}_{{ option.id }}">
                                        <strong>{{ option.description }}</strong>
                                        <br>
                                        <small class="text-muted">{{ option.value }}</small>
                                    </label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                    
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-success btn-lg px-5">
                            üßê –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥—Ä–∏–±
                        </button>
                        <p class="text-muted mt-2">–ú–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 0, 1, 2, 3... –∏–ª–∏ –≤—Å–µ 6 –≤–æ–ø—Ä–æ—Å–æ–≤</p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
.option-card label {
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.option-card label:hover {
    border-color: #198754;
    background-color: #f8f9fa;
}

.option-card input:checked + label {
    border-color: #198754;
    background-color: #d1e7dd;
}

.question-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}
</style>

<script>
// JavaScript —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —Å–Ω–∏–º–∞—Ç—å –≤—ã–±–æ—Ä —Å —Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–æ–∫
document.addEventListener('DOMContentLoaded', function() {
    const radioButtons = document.querySelectorAll('input[type="radio"]');
    
    radioButtons.forEach(radio => {
        radio.addEventListener('click', function() {
            if (this.checked && this.getAttribute('data-was-checked') === 'true') {
                this.checked = false;
                this.removeAttribute('data-was-checked');
            } else {
                this.setAttribute('data-was-checked', 'true');
            }
        });
    });
});
</script>
{% endblock %}