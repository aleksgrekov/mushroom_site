{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white text-center">
                    <h2 class="mb-0">üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–∏–∑–∞</h2>
                </div>
                <div class="card-body text-center">
                    <!-- –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
                    <div class="mb-3">
                        <span class="badge 
                            {% if quiz.level == 'basic' %}bg-success
                            {% elif quiz.level == 'advanced' %}bg-warning
                            {% else %}bg-danger{% endif %} fs-6">
                            {{ quiz.name }}
                        </span>
                    </div>
                    
                    <h3 class="text-{% if percentage >= 80 %}success{% elif percentage >= 60 %}warning{% else %}danger{% endif %} mb-3">
                        {{ percentage }}%
                    </h3>
                    
                    <div class="row mt-4">
                        <div class="col-md-4">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h4>{{ correct_answers }}</h4>
                                    <p class="mb-0">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-danger text-white">
                                <div class="card-body">
                                    <h4>{{ wrong_answers }}</h4>
                                    <p class="mb-0">–û—à–∏–±–∫–∏</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <h4>{{ score }}</h4>
                                    <p class="mb-0">–ë–∞–ª–ª—ã</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
                    <div class="progress mt-4" style="height: 20px;">
                        <div class="progress-bar bg-success" role="progressbar" 
                             style="width: {{ percentage }}%;" 
                             aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100">
                            {{ percentage }}%
                        </div>
                    </div>
                    
                    <!-- –û—Ü–µ–Ω–∫–∞ —Å —É—á–µ—Ç–æ–º —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
                    <div class="mt-4">
                        {% if quiz.level == 'expert' %}
                            {% if percentage >= 85 %}
                            <div class="alert alert-success">
                                <h4>üèÜ –í—ã - –≠–∫—Å–ø–µ—Ä—Ç!</h4>
                                <p class="mb-0">–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í–∞—à–∏ –∑–Ω–∞–Ω–∏—è –º–∏–∫–æ–ª–æ–≥–∏–∏ –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ!</p>
                            </div>
                            {% elif percentage >= 70 %}
                            <div class="alert alert-warning">
                                <h4>üëç –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ!</h4>
                                <p class="mb-0">–û—Ç–ª–∏—á–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è!</p>
                            </div>
                            {% elif percentage >= 50 %}
                            <div class="alert alert-info">
                                <h4>üòä –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</h4>
                                <p class="mb-0">–ù–µ–ø–ª–æ—Ö–æ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –Ω–æ –µ—Å—Ç—å –∫—É–¥–∞ —Ä–∞—Å—Ç–∏</p>
                            </div>
                            {% else %}
                            <div class="alert alert-danger">
                                <h4>üìö –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–±—É–µ—Ç –∏–∑—É—á–µ–Ω–∏—è</h4>
                                <p class="mb-0">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —É–≥–ª—É–±–∏—Ç—å –∑–Ω–∞–Ω–∏—è –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –º–∏–∫–æ–ª–æ–≥–∏–∏</p>
                            </div>
                            {% endif %}
                        
                        {% elif quiz.level == 'advanced' %}
                            {% if percentage >= 80 %}
                            <div class="alert alert-success">
                                <h4>üèÜ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</h4>
                                <p class="mb-0">–í—ã –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –º–∏–∫–æ–ª–æ–≥–∏–∏!</p>
                            </div>
                            {% elif percentage >= 60 %}
                            <div class="alert alert-warning">
                                <h4>üëç –•–æ—Ä–æ—à–æ!</h4>
                                <p class="mb-0">–°–æ–ª–∏–¥–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –ø–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º —Ç–µ–º–∞–º</p>
                            </div>
                            {% elif percentage >= 40 %}
                            <div class="alert alert-info">
                                <h4>üòä –ù–µ–ø–ª–æ—Ö–æ!</h4>
                                <p class="mb-0">–ù—É–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–º—ã –∏–∑ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è</p>
                            </div>
                            {% else %}
                            <div class="alert alert-danger">
                                <h4>üìö –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ</h4>
                                <p class="mb-0">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∏–∑—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∫—É –∏ —ç–∫–æ–ª–æ–≥–∏—é –≥—Ä–∏–±–æ–≤</p>
                            </div>
                            {% endif %}
                        
                        {% else %}
                            {% if percentage >= 90 %}
                            <div class="alert alert-success">
                                <h4>üèÜ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ!</h4>
                                <p class="mb-0">–ò–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ —É—Å–≤–æ–∏–ª–∏ –æ—Å–Ω–æ–≤—ã!</p>
                            </div>
                            {% elif percentage >= 70 %}
                            <div class="alert alert-warning">
                                <h4>üëç –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ!</h4>
                                <p class="mb-0">–û—Ç–ª–∏—á–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –ø–æ–Ω—è—Ç–∏–π –º–∏–∫–æ–ª–æ–≥–∏–∏!</p>
                            </div>
                            {% elif percentage >= 50 %}
                            <div class="alert alert-info">
                                <h4>üòä –•–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç!</h4>
                                <p class="mb-0">–ù—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è</p>
                            </div>
                            {% else %}
                            <div class="alert alert-danger">
                                <h4>üìö –û—Å–Ω–æ–≤—ã —Ç—Ä–µ–±—É—é—Ç –∏–∑—É—á–µ–Ω–∏—è</h4>
                                <p class="mb-0">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–∞—á–∞—Ç—å —Å –∏–∑—É—á–µ–Ω–∏—è —Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≥—Ä–∏–±–æ–≤</p>
                            </div>
                            {% endif %}
                        {% endif %}
                    </div>
                    
                    <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è -->
                    <div class="mt-3">
                        <p class="text-muted">
                            <small>
                                {% if quiz.level == 'basic' and percentage < 70 %}
                                üí° –°–æ–≤–µ—Ç: –ò–∑—É—á–∏—Ç–µ —Ä–∞–∑–¥–µ–ª—ã –æ —Å—Ç—Ä–æ–µ–Ω–∏–∏ –≥—Ä–∏–±–æ–≤ –∏ –∏—Ö –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
                                {% elif quiz.level == 'advanced' and percentage < 60 %}
                                üí° –°–æ–≤–µ—Ç: –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∫—É –≥—Ä–∏–±–æ–≤ –∏ –∏—Ö —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–æ–ª–∏
                                {% elif quiz.level == 'expert' and percentage < 70 %}
                                üí° –°–æ–≤–µ—Ç: –£–≥–ª—É–±–∏—Ç–µ –∑–Ω–∞–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –º–∏–∫–æ–ª–æ–≥–∏–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
                                {% else %}
                                üí° –°–æ–≤–µ—Ç: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–π—Ç–∏ –∫–≤–∏–∑ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è!
                                {% endif %}
                            </small>
                        </p>
                    </div>

                    <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="card shadow-lg mt-4">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="mb-0">üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                        </div>
                        <div class="card-body text-center">
                            <p>–•–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å?</p>
                            <a href="{% url 'quiz_results_detail' quiz_result_id %}" class="btn btn-info">
                                üìù –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                            </a>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <a href="{% url 'quiz_home' %}" class="btn btn-primary me-2">
                            –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –∫–≤–∏–∑
                        </a>
                        {% if quiz.level == 'basic' and percentage >= 70 %}
                        <a href="{% url 'quiz_start' advanced_quiz_id %}" class="btn btn-warning me-2">
                            –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å
                        </a>
                        {% elif quiz.level == 'advanced' and percentage >= 60 %}
                        <a href="{% url 'quiz_start' expert_quiz_id %}" class="btn btn-danger me-2">
                            –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å —ç–∫—Å–ø–µ—Ä—Ç–∞
                        </a>
                        {% endif %}
                        <a href="{% url 'edible_mushrooms' %}" class="btn btn-outline-primary">
                            –ò–∑—É—á–∏—Ç—å –≥—Ä–∏–±—ã
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}